  [1m[35m (2.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "battery_shifts"[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "battery_shifts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "start_time" datetime, "end_time" datetime, "complete" boolean DEFAULT 0, "employee_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX "index_battery_shifts_on_employee_id" ON "battery_shifts" ("employee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "employees"[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "employees" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicle_assignments"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "vehicle_assignments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "battery_shift_id" integer, "vehicle_id" integer, "completed_at" datetime, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_battery_shift_id" ON "vehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_vehicle_id" ON "vehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "license_plate" varchar, "battery_level" float, "in_use" boolean, "model" varchar, "location_lat" float, "location_long" float, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "last_parked_address" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TEMPORARY TABLE "abattery_shifts" ("id" integer NOT NULL PRIMARY KEY, "start_time" datetime DEFAULT NULL, "end_time" datetime DEFAULT NULL, "complete" boolean DEFAULT 0, "employee_id" integer DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "tindex_abattery_shifts_on_employee_id" ON "abattery_shifts" ("employee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "abattery_shifts" ("id","start_time","end_time","complete","employee_id","created_at","updated_at")
                     SELECT "id","start_time","end_time","complete","employee_id","created_at","updated_at" FROM "battery_shifts"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "battery_shifts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "battery_shifts" ("id" integer NOT NULL PRIMARY KEY, "start_time" datetime DEFAULT NULL, "end_time" datetime DEFAULT NULL, "complete" boolean DEFAULT 0, "employee_id" integer DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_62ae0dcdf2"
FOREIGN KEY ("employee_id")
  REFERENCES "employees" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_battery_shifts_on_employee_id" ON "battery_shifts" ("employee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("id","start_time","end_time","complete","employee_id","created_at","updated_at")
                     SELECT "id","start_time","end_time","complete","employee_id","created_at","updated_at" FROM "abattery_shifts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "abattery_shifts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "avehicle_assignments" ("id" integer NOT NULL PRIMARY KEY, "battery_shift_id" integer DEFAULT NULL, "vehicle_id" integer DEFAULT NULL, "completed_at" datetime DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "tindex_avehicle_assignments_on_vehicle_id" ON "avehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "tindex_avehicle_assignments_on_battery_shift_id" ON "avehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "avehicle_assignments" ("id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at")
                     SELECT "id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at" FROM "vehicle_assignments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "vehicle_assignments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "vehicle_assignments" ("id" integer NOT NULL PRIMARY KEY, "battery_shift_id" integer DEFAULT NULL, "vehicle_id" integer DEFAULT NULL, "completed_at" datetime DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_0d1aac83d6"
FOREIGN KEY ("battery_shift_id")
  REFERENCES "battery_shifts" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_battery_shift_id" ON "vehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_vehicle_id" ON "vehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at")
                     SELECT "id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at" FROM "avehicle_assignments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "avehicle_assignments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "avehicle_assignments" ("id" integer NOT NULL PRIMARY KEY, "battery_shift_id" integer DEFAULT NULL, "vehicle_id" integer DEFAULT NULL, "completed_at" datetime DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "tindex_avehicle_assignments_on_vehicle_id" ON "avehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "tindex_avehicle_assignments_on_battery_shift_id" ON "avehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "avehicle_assignments" ("id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at")
                     SELECT "id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at" FROM "vehicle_assignments"[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "vehicle_assignments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "vehicle_assignments" ("id" integer NOT NULL PRIMARY KEY, "battery_shift_id" integer DEFAULT NULL, "vehicle_id" integer DEFAULT NULL, "completed_at" datetime DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_0d1aac83d6"
FOREIGN KEY ("battery_shift_id")
  REFERENCES "battery_shifts" ("id")
, CONSTRAINT "fk_rails_b46c6d55cc"
FOREIGN KEY ("vehicle_id")
  REFERENCES "vehicles" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_battery_shift_id" ON "vehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_vehicle_id" ON "vehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at")
                     SELECT "id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at" FROM "avehicle_assignments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "avehicle_assignments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20191104031756)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20191027153950),
(20191102235822),
(20191103004632),
(20191103231438);

[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-11-04 06:29:30.139001"], ["updated_at", "2019-11-04 06:29:30.139001"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "6f5b5f8e9b8fd2550992e8c080dadd9d1682839c"], ["created_at", "2019-11-04 06:29:30.143817"], ["updated_at", "2019-11-04 06:29:30.143817"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:29:30.338247"], ["updated_at", "2019-11-04 06:29:30.338247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 27ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 7910)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:32:21.992943"], ["updated_at", "2019-11-04 06:32:21.992943"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 19ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.3ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:32:51.394851"], ["updated_at", "2019-11-04 06:32:51.394851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 23ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:36:23.346057"], ["updated_at", "2019-11-04 06:36:23.346057"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 22ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:36:23.357031"], ["updated_at", "2019-11-04 06:36:23.357031"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.5ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 32ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 6255)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:36:55.457629"], ["updated_at", "2019-11-04 06:36:55.457629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 25ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.8ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:37:26.906388"], ["updated_at", "2019-11-04 06:37:26.906388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 36ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 6186)
  [1m[36mBatteryShift Load (0.4ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ? LIMIT ?[0m  [["battery_shift_id", 1], ["LIMIT", 11]]
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.4ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:41:21.541395"], ["updated_at", "2019-11-04 06:41:21.541395"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 24ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:41:21.555063"], ["updated_at", "2019-11-04 06:41:21.555063"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 34ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 6255)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:41:56.535657"], ["updated_at", "2019-11-04 06:41:56.535657"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 16ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:41:56.544724"], ["updated_at", "2019-11-04 06:41:56.544724"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ? LIMIT ?[0m  [["battery_shift_id", 1], ["LIMIT", 11]]
Completed 500 Internal Server Error in 27278ms (ActiveRecord: 1.5ms | Allocations: 39629)
  [1m[35m (2.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:43:12.938812"], ["updated_at", "2019-11-04 06:43:12.938812"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 22ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.3ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:43:12.952271"], ["updated_at", "2019-11-04 06:43:12.952271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 28ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 6255)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:45:38.887462"], ["updated_at", "2019-11-04 06:45:38.887462"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 20ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:45:38.897504"], ["updated_at", "2019-11-04 06:45:38.897504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 6255)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:46:01.853923"], ["updated_at", "2019-11-04 06:46:01.853923"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 20ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:46:01.865600"], ["updated_at", "2019-11-04 06:46:01.865600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 31ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 6255)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:46:51.882708"], ["updated_at", "2019-11-04 06:46:51.882708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 24ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.3ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:46:51.895253"], ["updated_at", "2019-11-04 06:46:51.895253"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 29ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 6255)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:47:17.366985"], ["updated_at", "2019-11-04 06:47:17.366985"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 24ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:47:17.377690"], ["updated_at", "2019-11-04 06:47:17.377690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 6255)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.1ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:47:46.494349"], ["updated_at", "2019-11-04 06:47:46.494349"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 24ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:55:14.682586"], ["updated_at", "2019-11-04 06:55:14.682586"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 19ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 06:55:44.619434"], ["updated_at", "2019-11-04 06:55:44.619434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 16ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 06:55:44.627895"], ["updated_at", "2019-11-04 06:55:44.627895"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 19ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 3196)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.2ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.7ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 07:03:13.605003"], ["updated_at", "2019-11-04 07:03:13.605003"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 23ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:03:13.618533"], ["updated_at", "2019-11-04 07:03:13.618533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 3196)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:03:24.088475"], ["updated_at", "2019-11-04 07:03:24.088475"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (4.2ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (4.6ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (7.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (3.2ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:07:33.798122"], ["updated_at", "2019-11-04 07:07:33.798122"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:18:13.779152"], ["updated_at", "2019-11-04 07:18:13.779152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.4ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:22:53.463256"], ["updated_at", "2019-11-04 07:22:53.463256"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:22:53.484455"], ["updated_at", "2019-11-04 07:22:53.484455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:36:05.885641"], ["updated_at", "2019-11-04 07:36:05.885641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:36:05.908599"], ["updated_at", "2019-11-04 07:36:05.908599"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 07:36:05.918508"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.1ms | Allocations: 2811)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (5.7ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (5.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:38:03.462123"], ["updated_at", "2019-11-04 07:38:03.462123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:38:03.493173"], ["updated_at", "2019-11-04 07:38:03.493173"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 07:38:03.510642"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.3ms | Allocations: 2809)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.4ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.9ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:39:11.781960"], ["updated_at", "2019-11-04 07:39:11.781960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:39:11.804451"], ["updated_at", "2019-11-04 07:39:11.804451"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 07:39:11.814858"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.3ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 11]]
  [1m[36mVehicleAssignment Load (0.4ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 11]]
  [1m[36mVehicleAssignment Load (0.4ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mVehicle Load (0.8ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" LIMIT ?[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 269053ms (ActiveRecord: 2.9ms | Allocations: 42853)
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:43:56.761615"], ["updated_at", "2019-11-04 07:43:56.761615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:43:56.783893"], ["updated_at", "2019-11-04 07:43:56.783893"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 07:43:56.798059"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.9ms | Allocations: 2810)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:46:00.676973"], ["updated_at", "2019-11-04 07:46:00.676973"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:46:00.696732"], ["updated_at", "2019-11-04 07:46:00.696732"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 07:46:00.706820"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? ORDER BY "vehicle_assignments"."id" DESC LIMIT ?[0m  [["vehicle_id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.9ms | Allocations: 2807)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:46:20.135301"], ["updated_at", "2019-11-04 07:46:20.135301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:46:20.156818"], ["updated_at", "2019-11-04 07:46:20.156818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 07:46:20.166980"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.4ms | Allocations: 2810)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (4.0ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (3.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:47:03.576867"], ["updated_at", "2019-11-04 07:47:03.576867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 07:47:03.607363"], ["updated_at", "2019-11-04 07:47:03.607363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 07:47:03.623855"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.5ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 07:47:34.418622"], ["updated_at", "2019-11-04 07:47:34.418622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 500 Internal Server Error in 43060ms (ActiveRecord: 4.3ms | Allocations: 41506)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (4.1ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:00:20.410801"], ["updated_at", "2019-11-04 08:00:20.410801"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:00:20.432145"], ["updated_at", "2019-11-04 08:00:20.432145"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:00:20.460427"], ["updated_at", "2019-11-04 08:00:20.460427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 22ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 7139)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:01:17.267102"], ["updated_at", "2019-11-04 08:01:17.267102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:01:17.290537"], ["updated_at", "2019-11-04 08:01:17.290537"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:01:17.321810"], ["updated_at", "2019-11-04 08:01:17.321810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 54ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 7146)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.4ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:01:30.004666"], ["updated_at", "2019-11-04 08:01:30.004666"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:01:30.023628"], ["updated_at", "2019-11-04 08:01:30.023628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:01:30.053511"], ["updated_at", "2019-11-04 08:01:30.053511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 23ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 7136)
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.2ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:06:19.740202"], ["updated_at", "2019-11-04 08:06:19.740202"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:06:19.762767"], ["updated_at", "2019-11-04 08:06:19.762767"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 25ms (Views: 8.2ms | ActiveRecord: 0.8ms | Allocations: 4287)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:08:10.467539"], ["updated_at", "2019-11-04 08:08:10.467539"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:08:10.491542"], ["updated_at", "2019-11-04 08:08:10.491542"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 22ms (Views: 6.1ms | ActiveRecord: 0.6ms | Allocations: 4287)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.2ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:08:35.648181"], ["updated_at", "2019-11-04 08:08:35.648181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:08:35.671904"], ["updated_at", "2019-11-04 08:08:35.671904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 22ms (Views: 6.5ms | ActiveRecord: 0.6ms | Allocations: 4287)
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mVehicleAssignment Load (0.8ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mVehicleAssignment Load (0.9ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.6ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:14:53.304901"], ["updated_at", "2019-11-04 08:14:53.304901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:14:53.325872"], ["updated_at", "2019-11-04 08:14:53.325872"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:14:53.349227"], ["updated_at", "2019-11-04 08:14:53.349227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 14ms (Views: 3.6ms | ActiveRecord: 0.3ms | Allocations: 2549)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (4.6ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (8.8ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (5.9ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (5.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.7ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:15:27.416209"], ["updated_at", "2019-11-04 08:15:27.416209"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:15:27.447588"], ["updated_at", "2019-11-04 08:15:27.447588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:15:27.479492"], ["updated_at", "2019-11-04 08:15:27.479492"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.4ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 26ms (Views: 3.8ms | ActiveRecord: 0.4ms | Allocations: 2550)
  [1m[35m (3.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:16:23.518752"], ["updated_at", "2019-11-04 08:16:23.518752"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:16:23.544615"], ["updated_at", "2019-11-04 08:16:23.544615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:16:23.566504"], ["updated_at", "2019-11-04 08:16:23.566504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 14ms (Views: 3.1ms | ActiveRecord: 0.3ms | Allocations: 2550)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.8ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:17:01.151898"], ["updated_at", "2019-11-04 08:17:01.151898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:17:01.174933"], ["updated_at", "2019-11-04 08:17:01.174933"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:17:01.195974"], ["updated_at", "2019-11-04 08:17:01.195974"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 13ms (Views: 2.8ms | ActiveRecord: 0.3ms | Allocations: 2550)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.1ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:17:29.821836"], ["updated_at", "2019-11-04 08:17:29.821836"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:17:29.836679"], ["updated_at", "2019-11-04 08:17:29.836679"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:17:29.850346"], ["updated_at", "2019-11-04 08:17:29.850346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 7ms (Views: 2.5ms | ActiveRecord: 0.3ms | Allocations: 2550)
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (3.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:21:02.281203"], ["updated_at", "2019-11-04 08:21:02.281203"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:21:02.303184"], ["updated_at", "2019-11-04 08:21:02.303184"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:21:02.329729"], ["updated_at", "2019-11-04 08:21:02.329729"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 12ms (Views: 2.2ms | ActiveRecord: 0.3ms | Allocations: 2545)
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.8ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:22:13.944375"], ["updated_at", "2019-11-04 08:22:13.944375"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (2.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:22:13.976761"], ["updated_at", "2019-11-04 08:22:13.976761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:22:14.013462"], ["updated_at", "2019-11-04 08:22:14.013462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.4ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 24ms (Views: 3.9ms | ActiveRecord: 0.4ms | Allocations: 2545)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.4ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:26:53.618722"], ["updated_at", "2019-11-04 08:26:53.618722"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:26:53.639434"], ["updated_at", "2019-11-04 08:26:53.639434"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:26:53.665267"], ["updated_at", "2019-11-04 08:26:53.665267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 13ms (Views: 3.9ms | ActiveRecord: 0.5ms | Allocations: 2545)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (5.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.4ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:27:43.362238"], ["updated_at", "2019-11-04 08:27:43.362238"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:27:43.382084"], ["updated_at", "2019-11-04 08:27:43.382084"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:27:43.407854"], ["updated_at", "2019-11-04 08:27:43.407854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.4ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 15ms (Views: 4.2ms | ActiveRecord: 0.5ms | Allocations: 2545)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.4ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:30:12.526267"], ["updated_at", "2019-11-04 08:30:12.526267"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:30:12.547691"], ["updated_at", "2019-11-04 08:30:12.547691"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:30:12.570637"], ["updated_at", "2019-11-04 08:30:12.570637"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 12ms (Views: 2.7ms | ActiveRecord: 0.4ms | Allocations: 2545)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:30:12.591419"], ["updated_at", "2019-11-04 08:30:12.591419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:30:12.594113"], ["updated_at", "2019-11-04 08:30:12.594113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.4ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 08:30:12.595722"], ["created_at", "2019-11-04 08:30:12.599020"], ["updated_at", "2019-11-04 08:30:12.599020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.3ms | Allocations: 717)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:30:38.840368"], ["updated_at", "2019-11-04 08:30:38.840368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:30:38.860191"], ["updated_at", "2019-11-04 08:30:38.860191"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:30:38.880339"], ["updated_at", "2019-11-04 08:30:38.880339"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 12ms (Views: 2.4ms | ActiveRecord: 0.3ms | Allocations: 2545)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:30:38.900767"], ["updated_at", "2019-11-04 08:30:38.900767"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:30:38.902806"], ["updated_at", "2019-11-04 08:30:38.902806"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 08:30:38.904530"], ["created_at", "2019-11-04 08:30:38.906209"], ["updated_at", "2019-11-04 08:30:38.906209"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.1ms | Allocations: 717)
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:31:16.471545"], ["updated_at", "2019-11-04 08:31:16.471545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:31:16.496357"], ["updated_at", "2019-11-04 08:31:16.496357"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:31:16.523686"], ["updated_at", "2019-11-04 08:31:16.523686"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 14ms (Views: 2.9ms | ActiveRecord: 0.3ms | Allocations: 2545)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:31:16.546275"], ["updated_at", "2019-11-04 08:31:16.546275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:31:16.547944"], ["updated_at", "2019-11-04 08:31:16.547944"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 08:31:16.548841"], ["created_at", "2019-11-04 08:31:16.550510"], ["updated_at", "2019-11-04 08:31:16.550510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:33:00.613977"], ["updated_at", "2019-11-04 08:33:00.613977"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:33:00.637956"], ["updated_at", "2019-11-04 08:33:00.637956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:33:00.658673"], ["updated_at", "2019-11-04 08:33:00.658673"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 15ms (Views: 3.0ms | ActiveRecord: 0.3ms | Allocations: 2544)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:33:00.683279"], ["updated_at", "2019-11-04 08:33:00.683279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:33:00.685484"], ["updated_at", "2019-11-04 08:33:00.685484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 08:33:00.686745"], ["created_at", "2019-11-04 08:33:00.688835"], ["updated_at", "2019-11-04 08:33:00.688835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#show as HTML
  Parameters: {"battery_shift_id"=>"1", "id"=>"1"}
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 453)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:34:04.041599"], ["updated_at", "2019-11-04 08:34:04.041599"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 21ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 7843)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:34:04.051687"], ["updated_at", "2019-11-04 08:34:04.051687"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 30ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 6252)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:34:04.118117"], ["updated_at", "2019-11-04 08:34:04.118117"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 651)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (3.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:37:00.929890"], ["updated_at", "2019-11-04 08:37:00.929890"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 20ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 7862)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:37:00.968916"], ["updated_at", "2019-11-04 08:37:00.968916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 32ms (Views: 0.4ms | ActiveRecord: 1.2ms | Allocations: 6410)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:37:01.003775"], ["updated_at", "2019-11-04 08:37:01.003775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1392)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:37:50.958391"], ["updated_at", "2019-11-04 08:37:50.958391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 21ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 7862)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:37:50.969284"], ["updated_at", "2019-11-04 08:37:50.969284"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.4ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 29ms (Views: 0.6ms | ActiveRecord: 1.2ms | Allocations: 6271)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:37:51.034448"], ["updated_at", "2019-11-04 08:37:51.034448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 651)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (6.4ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:39:29.938254"], ["updated_at", "2019-11-04 08:39:29.938254"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 20ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 7860)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:39:29.947659"], ["updated_at", "2019-11-04 08:39:29.947659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.3ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 3212)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:40:01.479349"], ["updated_at", "2019-11-04 08:40:01.479349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 15ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 7862)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:40:01.487790"], ["updated_at", "2019-11-04 08:40:01.487790"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 3213)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:40:51.212638"], ["updated_at", "2019-11-04 08:40:51.212638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:40:51.237375"], ["updated_at", "2019-11-04 08:40:51.237375"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:40:51.260877"], ["updated_at", "2019-11-04 08:40:51.260877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 08:40:51.269986"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.0ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.1ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 08:40:51.272402"], ["updated_at", "2019-11-04 08:40:51.274414"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 8ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 2232)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:41:16.569158"], ["updated_at", "2019-11-04 08:41:16.569158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:41:16.594894"], ["updated_at", "2019-11-04 08:41:16.594894"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:41:16.615157"], ["updated_at", "2019-11-04 08:41:16.615157"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 08:41:16.625623"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.2ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 08:41:16.628931"], ["updated_at", "2019-11-04 08:41:16.631531"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 1.2ms | Allocations: 2232)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:42:47.810665"], ["updated_at", "2019-11-04 08:42:47.810665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:42:47.834504"], ["updated_at", "2019-11-04 08:42:47.834504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:42:47.857217"], ["updated_at", "2019-11-04 08:42:47.857217"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 08:42:47.867243"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.0ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.1ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 08:42:47.869851"], ["updated_at", "2019-11-04 08:42:47.871684"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 2232)
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.4ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:43:12.173828"], ["updated_at", "2019-11-04 08:43:12.173828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:43:12.196828"], ["updated_at", "2019-11-04 08:43:12.196828"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:43:12.215861"], ["updated_at", "2019-11-04 08:43:12.215861"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 08:43:12.227179"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.1ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 08:43:12.230216"], ["updated_at", "2019-11-04 08:43:12.232240"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 2231)
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:43:37.823690"], ["updated_at", "2019-11-04 08:43:37.823690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:43:37.851999"], ["updated_at", "2019-11-04 08:43:37.851999"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:43:37.874191"], ["updated_at", "2019-11-04 08:43:37.874191"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 08:43:37.884589"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.1ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 08:43:37.887621"], ["updated_at", "2019-11-04 08:43:37.889663"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 9ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 2232)
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:44:51.749491"], ["updated_at", "2019-11-04 08:44:51.749491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 25ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 7862)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:44:51.760838"], ["updated_at", "2019-11-04 08:44:51.760838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 32ms (Views: 0.4ms | ActiveRecord: 1.3ms | Allocations: 6271)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:44:51.795793"], ["updated_at", "2019-11-04 08:44:51.795793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.3ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 1405)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.1ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:45:13.544137"], ["updated_at", "2019-11-04 08:45:13.544137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 16ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 7862)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:45:13.553900"], ["updated_at", "2019-11-04 08:45:13.553900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 17ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 6271)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.755336"], ["updated_at", "2019-11-04 08:48:07.755336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.771662"], ["updated_at", "2019-11-04 08:48:07.771662"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:48:07.794194"], ["updated_at", "2019-11-04 08:48:07.794194"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 08:48:07.805471"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.1ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 08:48:07.808774"], ["updated_at", "2019-11-04 08:48:07.810898"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 2232)
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:48:07.820155"], ["updated_at", "2019-11-04 08:48:07.820155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 3ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 778)
  [1m[36mBatteryShift Load (0.3ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:48:07.828642"], ["updated_at", "2019-11-04 08:48:07.828642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.6ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 13ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 2529)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.8ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.847292"], ["updated_at", "2019-11-04 08:48:07.847292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 645)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.7ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.858903"], ["updated_at", "2019-11-04 08:48:07.858903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.862045"], ["updated_at", "2019-11-04 08:48:07.862045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:48:07.869465"], ["updated_at", "2019-11-04 08:48:07.869465"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 5ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 964)
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.876283"], ["updated_at", "2019-11-04 08:48:07.876283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.5ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.878546"], ["updated_at", "2019-11-04 08:48:07.878546"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:48:07.886023"], ["updated_at", "2019-11-04 08:48:07.886023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 720)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.8ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.893320"], ["updated_at", "2019-11-04 08:48:07.893320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:48:07.896720"], ["updated_at", "2019-11-04 08:48:07.896720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 08:48:07.898238"], ["created_at", "2019-11-04 08:48:07.900018"], ["updated_at", "2019-11-04 08:48:07.900018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#show as HTML
  Parameters: {"battery_shift_id"=>"1", "id"=>"1"}
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 337)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (4.2ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (4.1ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (5.5ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.612598"], ["updated_at", "2019-11-04 08:49:38.612598"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.643990"], ["updated_at", "2019-11-04 08:49:38.643990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.5ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:49:38.674274"], ["updated_at", "2019-11-04 08:49:38.674274"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 08:49:38.689771"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.1ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 08:49:38.693135"], ["updated_at", "2019-11-04 08:49:38.695181"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 9ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 2232)
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:49:38.705821"], ["updated_at", "2019-11-04 08:49:38.705821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 4ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 778)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:49:38.715052"], ["updated_at", "2019-11-04 08:49:38.715052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.6ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 19ms (Views: 0.5ms | ActiveRecord: 1.3ms | Allocations: 2529)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (1.9ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.738410"], ["updated_at", "2019-11-04 08:49:38.738410"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 645)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.751069"], ["updated_at", "2019-11-04 08:49:38.751069"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.753237"], ["updated_at", "2019-11-04 08:49:38.753237"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:49:38.759834"], ["updated_at", "2019-11-04 08:49:38.759834"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 964)
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.766909"], ["updated_at", "2019-11-04 08:49:38.766909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.768848"], ["updated_at", "2019-11-04 08:49:38.768848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:49:38.773194"], ["updated_at", "2019-11-04 08:49:38.773194"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.2ms | Allocations: 720)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.784100"], ["updated_at", "2019-11-04 08:49:38.784100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.6ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:49:38.786109"], ["updated_at", "2019-11-04 08:49:38.786109"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.4ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 08:49:38.788445"], ["created_at", "2019-11-04 08:49:38.792143"], ["updated_at", "2019-11-04 08:49:38.792143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#show as HTML
  Parameters: {"battery_shift_id"=>"1", "id"=>"1"}
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 337)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.289633"], ["updated_at", "2019-11-04 08:50:27.289633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.309417"], ["updated_at", "2019-11-04 08:50:27.309417"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:50:27.330555"], ["updated_at", "2019-11-04 08:50:27.330555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 08:50:27.342309"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.1ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 08:50:27.345341"], ["updated_at", "2019-11-04 08:50:27.347539"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 9ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 2261)
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:50:27.357498"], ["updated_at", "2019-11-04 08:50:27.357498"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 3ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 778)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 08:50:27.365964"], ["updated_at", "2019-11-04 08:50:27.365964"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.6ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 13ms (Views: 0.7ms | ActiveRecord: 1.2ms | Allocations: 2529)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.384885"], ["updated_at", "2019-11-04 08:50:27.384885"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 645)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.8ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.395242"], ["updated_at", "2019-11-04 08:50:27.395242"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.399561"], ["updated_at", "2019-11-04 08:50:27.399561"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:50:27.405087"], ["updated_at", "2019-11-04 08:50:27.405087"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 35ms (Views: 30.2ms | ActiveRecord: 0.7ms | Allocations: 974)
  [1m[36mVehicle Load (0.3ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.441759"], ["updated_at", "2019-11-04 08:50:27.441759"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.443831"], ["updated_at", "2019-11-04 08:50:27.443831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 08:50:27.446825"], ["updated_at", "2019-11-04 08:50:27.446825"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.1ms | Allocations: 720)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.453816"], ["updated_at", "2019-11-04 08:50:27.453816"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 08:50:27.455479"], ["updated_at", "2019-11-04 08:50:27.455479"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.0ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (1.0ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 08:50:27.456351"], ["created_at", "2019-11-04 08:50:27.457745"], ["updated_at", "2019-11-04 08:50:27.457745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#show as HTML
  Parameters: {"battery_shift_id"=>"1", "id"=>"1"}
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 337)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.5ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (1.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.64068643530596], ["location_long", -73.93830547389993], ["created_at", "2019-11-04 09:43:25.064177"], ["updated_at", "2019-11-04 09:43:25.064177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.6ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.626864741283256], ["location_long", -73.98628589500008], ["created_at", "2019-11-04 09:43:30.082409"], ["updated_at", "2019-11-04 09:43:30.082409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.64112133980731], ["location_long", -73.97084241843717], ["created_at", "2019-11-04 09:43:34.519478"], ["updated_at", "2019-11-04 09:43:34.519478"], ["last_parked_address", "810, Avenue C, Kensington, Rich white People town, Brooklyn, Kings County, New York, 11218, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.642231991323705], ["location_long", -73.93757268642251], ["created_at", "2019-11-04 09:43:39.533010"], ["updated_at", "2019-11-04 09:43:39.533010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.6ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62790107129967], ["location_long", -73.97437293213926], ["created_at", "2019-11-04 09:43:46.653649"], ["updated_at", "2019-11-04 09:43:46.653649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62327549941664], ["location_long", -73.96132391702527], ["created_at", "2019-11-04 09:43:51.717938"], ["updated_at", "2019-11-04 09:43:51.717938"], ["last_parked_address", "1078, East 15th Street, Midwood, Rich white People town, Brooklyn, Kings County, New York, 11230, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63544403473382], ["location_long", -73.99521123561186], ["created_at", "2019-11-04 09:43:56.728131"], ["updated_at", "2019-11-04 09:43:56.728131"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62286408680991], ["location_long", -73.92119362665954], ["created_at", "2019-11-04 09:44:00.567587"], ["updated_at", "2019-11-04 09:44:00.567587"], ["last_parked_address", "1355, East 56th Street, Glenwood Houses, Brooklyn, Kings County, New York, 11234, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (6.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63206278890959], ["location_long", -73.9279779561935], ["created_at", "2019-11-04 09:44:05.574152"], ["updated_at", "2019-11-04 09:44:05.574152"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.5ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63237119515999], ["location_long", -73.92752953655553], ["created_at", "2019-11-04 09:44:10.704386"], ["updated_at", "2019-11-04 09:44:10.704386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (1.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65242723744771], ["location_long", -73.92964731868801], ["created_at", "2019-11-04 09:44:15.724271"], ["updated_at", "2019-11-04 09:44:15.724271"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.64140856179609], ["location_long", -73.9424312254902], ["created_at", "2019-11-04 09:44:20.739977"], ["updated_at", "2019-11-04 09:44:20.739977"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.9ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63393898804722], ["location_long", -73.94413452586592], ["created_at", "2019-11-04 09:44:25.751239"], ["updated_at", "2019-11-04 09:44:25.751239"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62083028119883], ["location_long", -73.98324594443748], ["created_at", "2019-11-04 09:44:33.742138"], ["updated_at", "2019-11-04 09:44:33.742138"], ["last_parked_address", "1939, 59th Street, Midwood, Rich white People town, Brooklyn, Kings County, New York, 11204, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.5ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.629242613356865], ["location_long", -73.99124071148253], ["created_at", "2019-11-04 09:44:38.749800"], ["updated_at", "2019-11-04 09:44:38.749800"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.626797399677976], ["location_long", -73.93719570887514], ["created_at", "2019-11-04 09:44:43.861931"], ["updated_at", "2019-11-04 09:44:43.861931"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.9ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62169370571311], ["location_long", -73.94045791661517], ["created_at", "2019-11-04 09:44:50.088316"], ["updated_at", "2019-11-04 09:44:50.088316"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.64495098634061], ["location_long", -73.98931599321546], ["created_at", "2019-11-04 09:44:54.570706"], ["updated_at", "2019-11-04 09:44:54.570706"], ["last_parked_address", "Border Avenue, Windsor Terrace, Rich white People town, Brooklyn, Kings County, New York, 11218, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.629900206873586], ["location_long", -73.95844424272529], ["created_at", "2019-11-04 09:44:56.790580"], ["updated_at", "2019-11-04 09:44:56.790580"], ["last_parked_address", "852, East 19th Street, Midwood, Rich white People town, Brooklyn, Kings County, New York, 11230, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (1.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.61533110889423], ["location_long", -73.96667631997822], ["created_at", "2019-11-04 09:45:01.803207"], ["updated_at", "2019-11-04 09:45:01.803207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 09:45:01.838888"], ["updated_at", "2019-11-04 09:45:01.838888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 20ms (Views: 0.6ms | ActiveRecord: 1.4ms | Allocations: 7019)
  [1m[36mBatteryShift Load (0.3ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (4.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (1.6ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65556983859467], ["location_long", -73.98079659379376], ["created_at", "2019-11-04 09:45:07.852427"], ["updated_at", "2019-11-04 09:45:07.852427"], ["last_parked_address", "556, 19th Street, Windsor Terrace, Rich white People town, Brooklyn, Kings County, New York, 11218, United States of America"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.6480331227985], ["location_long", -73.92636761755493], ["created_at", "2019-11-04 09:45:12.865620"], ["updated_at", "2019-11-04 09:45:12.865620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62352290195328], ["location_long", -73.9880208319127], ["created_at", "2019-11-04 09:45:17.695100"], ["updated_at", "2019-11-04 09:45:17.695100"], ["last_parked_address", "1727, 59th Street, Midwood, Rich white People town, Brooklyn, Kings County, New York, 11204, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.650143113614], ["location_long", -73.99913357082673], ["created_at", "2019-11-04 09:45:20.339344"], ["updated_at", "2019-11-04 09:45:20.339344"], ["last_parked_address", "662, 36th Street, Sunset Park, Rich white People town, Brooklyn, Kings County, New York, 11232, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63895919357417], ["location_long", -73.98362353722351], ["created_at", "2019-11-04 09:45:26.485817"], ["updated_at", "2019-11-04 09:45:26.485817"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.64847175385067], ["location_long", -73.94944629268942], ["created_at", "2019-11-04 09:45:31.514890"], ["updated_at", "2019-11-04 09:45:31.514890"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.619273484042765], ["location_long", -73.9390793763272], ["created_at", "2019-11-04 09:45:36.524825"], ["updated_at", "2019-11-04 09:45:36.524825"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65219743037347], ["location_long", -73.95961658783465], ["created_at", "2019-11-04 09:45:44.681167"], ["updated_at", "2019-11-04 09:45:44.681167"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (4.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65081582174624], ["location_long", -73.99645974421252], ["created_at", "2019-11-04 09:45:51.811600"], ["updated_at", "2019-11-04 09:45:51.811600"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65562104697087], ["location_long", -73.99275290036672], ["created_at", "2019-11-04 09:45:56.725090"], ["updated_at", "2019-11-04 09:45:56.725090"], ["last_parked_address", "Fern Avenue, South Slope, Rich white People town, Brooklyn, Kings County, New York, 11232, United States of America"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (4.6ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.5ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62569074219597], ["location_long", -73.95039532017721], ["created_at", "2019-11-04 09:46:52.342366"], ["updated_at", "2019-11-04 09:46:52.342366"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62990180242828], ["location_long", -73.94287980157986], ["created_at", "2019-11-04 09:47:01.469188"], ["updated_at", "2019-11-04 09:47:01.469188"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.619299921962075], ["location_long", -73.98080144585388], ["created_at", "2019-11-04 09:47:06.481627"], ["updated_at", "2019-11-04 09:47:06.481627"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.623184834018204], ["location_long", -73.96588418899174], ["created_at", "2019-11-04 09:47:11.384734"], ["updated_at", "2019-11-04 09:47:11.384734"], ["last_parked_address", "1060, East 10th Street, Midwood, Rich white People town, Brooklyn, Kings County, New York, 11230, United States of America"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (4.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65225358271247], ["location_long", -73.93669153450313], ["created_at", "2019-11-04 09:47:16.559345"], ["updated_at", "2019-11-04 09:47:16.559345"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (5.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.61722598042831], ["location_long", -73.97727015991175], ["created_at", "2019-11-04 09:47:21.577910"], ["updated_at", "2019-11-04 09:47:21.577910"]]
  [1m[35m (5.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.650501639880474], ["location_long", -73.94852134374474], ["created_at", "2019-11-04 09:47:26.606475"], ["updated_at", "2019-11-04 09:47:26.606475"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.6ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.637487314702085], ["location_long", -73.98010087077445], ["created_at", "2019-11-04 09:47:28.995599"], ["updated_at", "2019-11-04 09:47:28.995599"], ["last_parked_address", "1556, 38th Street, Parkville, Rich white People town, Brooklyn, Kings County, New York, 11218, United States of America"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.8ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.61678395641523], ["location_long", -73.9945170954296], ["created_at", "2019-11-04 09:47:32.429512"], ["updated_at", "2019-11-04 09:47:32.429512"], ["last_parked_address", "1744, 70th Street, Dyker Heights, Rich white People town, Brooklyn, Kings County, New York, 11204, United States of America"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.6ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.655700823085716], ["location_long", -73.92141124514251], ["created_at", "2019-11-04 09:47:37.440570"], ["updated_at", "2019-11-04 09:47:37.440570"]]
  [1m[35m (2.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.5ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63344114879418], ["location_long", -73.94485174663905], ["created_at", "2019-11-04 09:47:46.673082"], ["updated_at", "2019-11-04 09:47:46.673082"]]
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.61912217284044], ["location_long", -73.93162787483907], ["created_at", "2019-11-04 09:47:51.694361"], ["updated_at", "2019-11-04 09:47:51.694361"]]
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.6224364246594], ["location_long", -73.92651983824098], ["created_at", "2019-11-04 09:47:56.709910"], ["updated_at", "2019-11-04 09:47:56.709910"]]
  [1m[35m (5.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.615155668865704], ["location_long", -73.94881009437555], ["created_at", "2019-11-04 09:48:01.732247"], ["updated_at", "2019-11-04 09:48:01.732247"]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (2.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.625712867046936], ["location_long", -73.95546314311521], ["created_at", "2019-11-04 09:48:08.861577"], ["updated_at", "2019-11-04 09:48:08.861577"]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.642732641788186], ["location_long", -73.97884387896883], ["created_at", "2019-11-04 09:48:16.531712"], ["updated_at", "2019-11-04 09:48:16.531712"], ["last_parked_address", "116, Beverley Road, Kensington, Rich white People town, Brooklyn, Kings County, New York, 11218, United States of America"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.8ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.61797995952896], ["location_long", -73.95736760760569], ["created_at", "2019-11-04 09:48:21.540258"], ["updated_at", "2019-11-04 09:48:21.540258"]]
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.8ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63723929289861], ["location_long", -73.97830589133557], ["created_at", "2019-11-04 09:48:25.573598"], ["updated_at", "2019-11-04 09:48:25.573598"], ["last_parked_address", "689, McDonald Avenue, Parkville, Rich white People town, Brooklyn, Kings County, New York, 11218, United States of America"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.8ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.649506595818906], ["location_long", -73.96118525060687], ["created_at", "2019-11-04 09:48:29.161446"], ["updated_at", "2019-11-04 09:48:29.161446"], ["last_parked_address", "540, Ocean Avenue, Flatbush, Rich white People town, Brooklyn, Kings County, New York, 11226, United States of America"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (2.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.629639168349755], ["location_long", -73.93442350985482], ["created_at", "2019-11-04 09:48:33.920284"], ["updated_at", "2019-11-04 09:48:33.920284"], ["last_parked_address", "1035, East 43rd Street, Flatlands, Rich white People town, Brooklyn, Kings County, New York, 11210, United States of America"]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 09:48:33.956335"], ["updated_at", "2019-11-04 09:48:33.956335"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 17ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 7020)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.9ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 09:48:33.970209"], ["updated_at", "2019-11-04 09:48:33.970209"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.7ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 16], ["created_at", "2019-11-04 09:48:34.006508"], ["updated_at", "2019-11-04 09:48:34.006508"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 8], ["created_at", "2019-11-04 09:48:34.008212"], ["updated_at", "2019-11-04 09:48:34.008212"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 18], ["created_at", "2019-11-04 09:48:34.009304"], ["updated_at", "2019-11-04 09:48:34.009304"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 3], ["created_at", "2019-11-04 09:48:34.010314"], ["updated_at", "2019-11-04 09:48:34.010314"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 19], ["created_at", "2019-11-04 09:48:34.011331"], ["updated_at", "2019-11-04 09:48:34.011331"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 6], ["created_at", "2019-11-04 09:48:34.012334"], ["updated_at", "2019-11-04 09:48:34.012334"]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 4], ["created_at", "2019-11-04 09:48:34.013471"], ["updated_at", "2019-11-04 09:48:34.013471"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 9], ["created_at", "2019-11-04 09:48:34.014744"], ["updated_at", "2019-11-04 09:48:34.014744"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 7], ["created_at", "2019-11-04 09:48:34.015858"], ["updated_at", "2019-11-04 09:48:34.015858"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 15], ["created_at", "2019-11-04 09:48:34.016952"], ["updated_at", "2019-11-04 09:48:34.016952"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 11], ["created_at", "2019-11-04 09:48:34.018018"], ["updated_at", "2019-11-04 09:48:34.018018"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 09:48:34.019128"], ["updated_at", "2019-11-04 09:48:34.019128"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 17], ["created_at", "2019-11-04 09:48:34.020191"], ["updated_at", "2019-11-04 09:48:34.020191"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 2], ["created_at", "2019-11-04 09:48:34.021341"], ["updated_at", "2019-11-04 09:48:34.021341"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 5], ["created_at", "2019-11-04 09:48:34.022388"], ["updated_at", "2019-11-04 09:48:34.022388"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 20], ["created_at", "2019-11-04 09:48:34.023396"], ["updated_at", "2019-11-04 09:48:34.023396"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 14], ["created_at", "2019-11-04 09:48:34.024401"], ["updated_at", "2019-11-04 09:48:34.024401"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 12], ["created_at", "2019-11-04 09:48:34.025569"], ["updated_at", "2019-11-04 09:48:34.025569"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 10], ["created_at", "2019-11-04 09:48:34.026697"], ["updated_at", "2019-11-04 09:48:34.026697"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 13], ["created_at", "2019-11-04 09:48:34.027773"], ["updated_at", "2019-11-04 09:48:34.027773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 60ms (Views: 0.4ms | ActiveRecord: 4.8ms | Allocations: 18569)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.8ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 09:48:34.032434"], ["updated_at", "2019-11-04 09:48:34.032434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 645)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (2.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (2.7ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.61949470914061], ["location_long", -73.97355481030827], ["created_at", "2019-11-04 09:49:30.739690"], ["updated_at", "2019-11-04 09:49:30.739690"]]
  [1m[35m (2.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65778502359012], ["location_long", -73.98178162961284], ["created_at", "2019-11-04 09:49:35.760336"], ["updated_at", "2019-11-04 09:49:35.760336"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.9ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62627045792157], ["location_long", -73.96562492098822], ["created_at", "2019-11-04 09:49:40.774160"], ["updated_at", "2019-11-04 09:49:40.774160"]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.628262911893266], ["location_long", -73.92517252338314], ["created_at", "2019-11-04 09:49:45.785801"], ["updated_at", "2019-11-04 09:49:45.785801"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.6ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.636712887047786], ["location_long", -73.96045372646398], ["created_at", "2019-11-04 09:49:51.902812"], ["updated_at", "2019-11-04 09:49:51.902812"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.6166784860648], ["location_long", -73.9974646267764], ["created_at", "2019-11-04 09:49:56.918359"], ["updated_at", "2019-11-04 09:49:56.918359"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.64556139563992], ["location_long", -73.98059682196748], ["created_at", "2019-11-04 09:50:01.932898"], ["updated_at", "2019-11-04 09:50:01.932898"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.638019370180025], ["location_long", -73.93945787497776], ["created_at", "2019-11-04 09:50:08.820066"], ["updated_at", "2019-11-04 09:50:08.820066"], ["last_parked_address", "779, East 39th Street, Flatlands, Rich white People town, Brooklyn, Kings County, New York, 11210, United States of America"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65522433821551], ["location_long", -73.9646964795495], ["created_at", "2019-11-04 09:50:15.952007"], ["updated_at", "2019-11-04 09:50:15.952007"]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (2.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62938452455914], ["location_long", -73.95663374589711], ["created_at", "2019-11-04 09:50:20.970095"], ["updated_at", "2019-11-04 09:50:20.970095"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (3.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.6433673893609], ["location_long", -73.95358659085461], ["created_at", "2019-11-04 09:50:29.098089"], ["updated_at", "2019-11-04 09:50:29.098089"]]
  [1m[35m (2.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (2.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.62665142261147], ["location_long", -73.98024236322266], ["created_at", "2019-11-04 09:50:34.448484"], ["updated_at", "2019-11-04 09:50:34.448484"], ["last_parked_address", "1850, 50th Street, Sunset Park, Rich white People town, Brooklyn, Kings County, New York, 11204, United States of America"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.61581786681239], ["location_long", -73.9464935757964], ["created_at", "2019-11-04 09:50:42.566032"], ["updated_at", "2019-11-04 09:50:42.566032"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.7ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63105858884873], ["location_long", -73.94193158295454], ["created_at", "2019-11-04 09:50:46.725273"], ["updated_at", "2019-11-04 09:50:46.725273"], ["last_parked_address", "1728, Brooklyn Avenue, Flatlands, Rich white People town, Brooklyn, Kings County, New York, 11210, United States of America"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.8ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.65691361800514], ["location_long", -73.99013640589972], ["created_at", "2019-11-04 09:50:51.733313"], ["updated_at", "2019-11-04 09:50:51.733313"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.4ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63323728377543], ["location_long", -73.93738303884716], ["created_at", "2019-11-04 09:50:56.872461"], ["updated_at", "2019-11-04 09:50:56.872461"]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (0.8ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.63260121169485], ["location_long", -73.97494755854068], ["created_at", "2019-11-04 09:51:02.733038"], ["updated_at", "2019-11-04 09:51:02.733038"], ["last_parked_address", "793, East 3rd Street, Parkville, Rich white People town, Brooklyn, Kings County, New York, 11218, United States of America"]]
  [1m[35m (2.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at", "last_parked_address") VALUES (?, ?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.655149206845024], ["location_long", -73.98879004495237], ["created_at", "2019-11-04 09:51:06.079510"], ["updated_at", "2019-11-04 09:51:06.079510"], ["last_parked_address", "Meadow Avenue, South Slope, Rich white People town, Brooklyn, Kings County, New York, 11232, United States of America"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (2.6ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.64537218735813], ["location_long", -73.9593491170944], ["created_at", "2019-11-04 09:51:11.090239"], ["updated_at", "2019-11-04 09:51:11.090239"]]
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mVehicle Create (1.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("in_use", "location_lat", "location_long", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["in_use", 0], ["location_lat", 40.649752342600415], ["location_long", -73.9959226255584], ["created_at", "2019-11-04 09:51:16.103797"], ["updated_at", "2019-11-04 09:51:16.103797"]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 09:51:16.144401"], ["updated_at", "2019-11-04 09:51:16.144401"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 22ms (Views: 0.5ms | ActiveRecord: 1.0ms | Allocations: 7020)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.9ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 09:51:16.154908"], ["updated_at", "2019-11-04 09:51:16.154908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.4ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 7], ["created_at", "2019-11-04 09:51:16.186718"], ["updated_at", "2019-11-04 09:51:16.186718"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 17], ["created_at", "2019-11-04 09:51:16.188347"], ["updated_at", "2019-11-04 09:51:16.188347"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 2], ["created_at", "2019-11-04 09:51:16.189381"], ["updated_at", "2019-11-04 09:51:16.189381"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 12], ["created_at", "2019-11-04 09:51:16.190374"], ["updated_at", "2019-11-04 09:51:16.190374"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 18], ["created_at", "2019-11-04 09:51:16.191395"], ["updated_at", "2019-11-04 09:51:16.191395"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 20], ["created_at", "2019-11-04 09:51:16.192384"], ["updated_at", "2019-11-04 09:51:16.192384"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 15], ["created_at", "2019-11-04 09:51:16.193372"], ["updated_at", "2019-11-04 09:51:16.193372"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 19], ["created_at", "2019-11-04 09:51:16.194369"], ["updated_at", "2019-11-04 09:51:16.194369"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 5], ["created_at", "2019-11-04 09:51:16.195962"], ["updated_at", "2019-11-04 09:51:16.195962"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 11], ["created_at", "2019-11-04 09:51:16.197224"], ["updated_at", "2019-11-04 09:51:16.197224"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 9], ["created_at", "2019-11-04 09:51:16.198242"], ["updated_at", "2019-11-04 09:51:16.198242"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 09:51:16.199220"], ["updated_at", "2019-11-04 09:51:16.199220"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 3], ["created_at", "2019-11-04 09:51:16.200232"], ["updated_at", "2019-11-04 09:51:16.200232"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 10], ["created_at", "2019-11-04 09:51:16.201225"], ["updated_at", "2019-11-04 09:51:16.201225"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 6], ["created_at", "2019-11-04 09:51:16.202255"], ["updated_at", "2019-11-04 09:51:16.202255"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 8], ["created_at", "2019-11-04 09:51:16.203251"], ["updated_at", "2019-11-04 09:51:16.203251"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 14], ["created_at", "2019-11-04 09:51:16.204312"], ["updated_at", "2019-11-04 09:51:16.204312"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 16], ["created_at", "2019-11-04 09:51:16.205489"], ["updated_at", "2019-11-04 09:51:16.205489"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 13], ["created_at", "2019-11-04 09:51:16.206545"], ["updated_at", "2019-11-04 09:51:16.206545"]]
  [1m[36mVehicleAssignment Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 4], ["created_at", "2019-11-04 09:51:16.207592"], ["updated_at", "2019-11-04 09:51:16.207592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 54ms (Views: 0.3ms | ActiveRecord: 3.9ms | Allocations: 18568)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 09:51:16.212984"], ["updated_at", "2019-11-04 09:51:16.212984"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 645)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (3.7ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (3.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (3.3ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.365040"], ["updated_at", "2019-11-04 10:07:49.365040"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.386867"], ["updated_at", "2019-11-04 10:07:49.386867"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:07:49.410539"], ["updated_at", "2019-11-04 10:07:49.410539"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 10:07:49.420897"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.0ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.1ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 10:07:49.423552"], ["updated_at", "2019-11-04 10:07:49.425216"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 8ms (Views: 0.5ms | ActiveRecord: 0.8ms | Allocations: 2260)
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.7ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 10:07:49.434494"], ["updated_at", "2019-11-04 10:07:49.434494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 5ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 778)
  [1m[36mBatteryShift Load (0.3ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.7ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 10:07:49.448017"], ["updated_at", "2019-11-04 10:07:49.448017"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.4ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 71ms (Views: 0.5ms | ActiveRecord: 1.4ms | Allocations: 2535)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.523140"], ["updated_at", "2019-11-04 10:07:49.523140"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 645)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.531574"], ["updated_at", "2019-11-04 10:07:49.531574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.533555"], ["updated_at", "2019-11-04 10:07:49.533555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.6ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:07:49.539852"], ["updated_at", "2019-11-04 10:07:49.539852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 6ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 964)
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.549990"], ["updated_at", "2019-11-04 10:07:49.549990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.551988"], ["updated_at", "2019-11-04 10:07:49.551988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:07:49.555106"], ["updated_at", "2019-11-04 10:07:49.555106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.2ms | Allocations: 720)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.565190"], ["updated_at", "2019-11-04 10:07:49.565190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:07:49.567203"], ["updated_at", "2019-11-04 10:07:49.567203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.0ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 10:07:49.568308"], ["created_at", "2019-11-04 10:07:49.569868"], ["updated_at", "2019-11-04 10:07:49.569868"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#show as HTML
  Parameters: {"battery_shift_id"=>"1", "id"=>"1"}
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 337)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-11-04 10:08:01.268661"], ["updated_at", "2019-11-04 10:08:01.268661"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "battery_shifts"[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "battery_shifts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "start_time" datetime, "end_time" datetime, "complete" boolean DEFAULT 0, "employee_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX "index_battery_shifts_on_employee_id" ON "battery_shifts" ("employee_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "employees"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "employees" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicle_assignments"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "vehicle_assignments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "battery_shift_id" integer, "vehicle_id" integer, "completed_at" datetime, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_battery_shift_id" ON "vehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_vehicle_id" ON "vehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "license_plate" varchar, "battery_level" float, "in_use" boolean, "model" varchar, "location_lat" float, "location_long" float, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "last_parked_address" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "abattery_shifts" ("id" integer NOT NULL PRIMARY KEY, "start_time" datetime DEFAULT NULL, "end_time" datetime DEFAULT NULL, "complete" boolean DEFAULT 0, "employee_id" integer DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "tindex_abattery_shifts_on_employee_id" ON "abattery_shifts" ("employee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "abattery_shifts" ("id","start_time","end_time","complete","employee_id","created_at","updated_at")
                     SELECT "id","start_time","end_time","complete","employee_id","created_at","updated_at" FROM "battery_shifts"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "battery_shifts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "battery_shifts" ("id" integer NOT NULL PRIMARY KEY, "start_time" datetime DEFAULT NULL, "end_time" datetime DEFAULT NULL, "complete" boolean DEFAULT 0, "employee_id" integer DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_62ae0dcdf2"
FOREIGN KEY ("employee_id")
  REFERENCES "employees" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_battery_shifts_on_employee_id" ON "battery_shifts" ("employee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("id","start_time","end_time","complete","employee_id","created_at","updated_at")
                     SELECT "id","start_time","end_time","complete","employee_id","created_at","updated_at" FROM "abattery_shifts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "abattery_shifts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "avehicle_assignments" ("id" integer NOT NULL PRIMARY KEY, "battery_shift_id" integer DEFAULT NULL, "vehicle_id" integer DEFAULT NULL, "completed_at" datetime DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "tindex_avehicle_assignments_on_vehicle_id" ON "avehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "tindex_avehicle_assignments_on_battery_shift_id" ON "avehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "avehicle_assignments" ("id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at")
                     SELECT "id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at" FROM "vehicle_assignments"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "vehicle_assignments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "vehicle_assignments" ("id" integer NOT NULL PRIMARY KEY, "battery_shift_id" integer DEFAULT NULL, "vehicle_id" integer DEFAULT NULL, "completed_at" datetime DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_0d1aac83d6"
FOREIGN KEY ("battery_shift_id")
  REFERENCES "battery_shifts" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_battery_shift_id" ON "vehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_vehicle_id" ON "vehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at")
                     SELECT "id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at" FROM "avehicle_assignments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "avehicle_assignments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "avehicle_assignments" ("id" integer NOT NULL PRIMARY KEY, "battery_shift_id" integer DEFAULT NULL, "vehicle_id" integer DEFAULT NULL, "completed_at" datetime DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "tindex_avehicle_assignments_on_vehicle_id" ON "avehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "tindex_avehicle_assignments_on_battery_shift_id" ON "avehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "avehicle_assignments" ("id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at")
                     SELECT "id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at" FROM "vehicle_assignments"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "vehicle_assignments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "vehicle_assignments" ("id" integer NOT NULL PRIMARY KEY, "battery_shift_id" integer DEFAULT NULL, "vehicle_id" integer DEFAULT NULL, "completed_at" datetime DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_0d1aac83d6"
FOREIGN KEY ("battery_shift_id")
  REFERENCES "battery_shifts" ("id")
, CONSTRAINT "fk_rails_b46c6d55cc"
FOREIGN KEY ("vehicle_id")
  REFERENCES "vehicles" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_battery_shift_id" ON "vehicle_assignments" ("battery_shift_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_vehicle_assignments_on_vehicle_id" ON "vehicle_assignments" ("vehicle_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at")
                     SELECT "id","battery_shift_id","vehicle_id","completed_at","created_at","updated_at" FROM "avehicle_assignments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "avehicle_assignments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20191104031756)[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20191027153950),
(20191102235822),
(20191103004632),
(20191103231438);

[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-11-04 10:08:06.870601"], ["updated_at", "2019-11-04 10:08:06.870601"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "6f5b5f8e9b8fd2550992e8c080dadd9d1682839c"], ["created_at", "2019-11-04 10:08:06.876107"], ["updated_at", "2019-11-04 10:08:06.876107"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:06.987632"], ["updated_at", "2019-11-04 10:08:06.987632"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:07.011247"], ["updated_at", "2019-11-04 10:08:07.011247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:08:07.035513"], ["updated_at", "2019-11-04 10:08:07.035513"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 10:08:07.044121"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.3ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.2ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 10:08:07.049496"], ["updated_at", "2019-11-04 10:08:07.053466"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 16ms (Views: 1.1ms | ActiveRecord: 1.7ms | Allocations: 2260)
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 10:08:07.065918"], ["updated_at", "2019-11-04 10:08:07.065918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 4ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 778)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.8ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 10:08:07.075016"], ["updated_at", "2019-11-04 10:08:07.075016"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.7ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 55ms (Views: 47.3ms | ActiveRecord: 1.6ms | Allocations: 2533)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:07.134552"], ["updated_at", "2019-11-04 10:08:07.134552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 645)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:07.142353"], ["updated_at", "2019-11-04 10:08:07.142353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:07.144560"], ["updated_at", "2019-11-04 10:08:07.144560"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:08:07.149491"], ["updated_at", "2019-11-04 10:08:07.149491"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 964)
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:07.155741"], ["updated_at", "2019-11-04 10:08:07.155741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:07.157690"], ["updated_at", "2019-11-04 10:08:07.157690"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:08:07.161767"], ["updated_at", "2019-11-04 10:08:07.161767"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 720)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:07.170355"], ["updated_at", "2019-11-04 10:08:07.170355"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:08:07.172753"], ["updated_at", "2019-11-04 10:08:07.172753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.4ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 10:08:07.174066"], ["created_at", "2019-11-04 10:08:07.176077"], ["updated_at", "2019-11-04 10:08:07.176077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#show as HTML
  Parameters: {"battery_shift_id"=>"1", "id"=>"1"}
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 337)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "employees";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'employees';[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "vehicles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicles';[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "battery_shifts";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'battery_shifts';[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "vehicle_assignments";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'vehicle_assignments';[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.7ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.035867"], ["updated_at", "2019-11-04 10:28:43.035867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.057329"], ["updated_at", "2019-11-04 10:28:43.057329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:28:43.079161"], ["updated_at", "2019-11-04 10:28:43.079161"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteriesController#update as HTML
  Parameters: {"battery_shift_id"=>"1", "vehicle_id"=>"1"}
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Update (0.2ms)[0m  [1m[33mUPDATE "vehicles" SET "battery_level" = ?, "updated_at" = ? WHERE "vehicles"."id" = ?[0m  [["battery_level", 1.0], ["updated_at", "2019-11-04 10:28:43.088269"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicleAssignment Load (0.3ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Update (0.2ms)[0m  [1m[33mUPDATE "vehicle_assignments" SET "completed_at" = ?, "updated_at" = ? WHERE "vehicle_assignments"."id" = ?[0m  [["completed_at", "2019-11-04 10:28:43.093338"], ["updated_at", "2019-11-04 10:28:43.097168"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 1.6ms | Allocations: 2260)
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "start_time"=>"2019-11-05 20:00:00"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 10:28:43.110132"], ["updated_at", "2019-11-04 10:28:43.110132"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 778)
  [1m[36mBatteryShift Load (0.2ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Api::BatteryShiftsController#create as HTML
  Parameters: {"end_time"=>"2019-11-05 22:00:0", "location_lat"=>"40.64181327532475", "location_long"=>"-73.98185534280718", "start_time"=>"2019-11-05 20:00:00"}
[31mUnpermitted parameters: :location_lat, :location_long[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("start_time", "end_time", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_time", "2019-11-05 20:00:00"], ["end_time", "2019-11-05 22:00:00"], ["created_at", "2019-11-04 10:28:43.118656"], ["updated_at", "2019-11-04 10:28:43.118656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.4ms)[0m  [1m[34mSELECT vehicles.*, (69.09332411348201 * ABS(vehicles.location_lat - 40.64181327532475) * 0.7071067811865475) + (59.836573914187355 * ABS(vehicles.location_long - -73.98185534280718) * 0.7071067811865475) AS distance, CASE WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN  45.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long >= -73.98185534280718) THEN 135.0 WHEN (vehicles.location_lat <  40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 225.0 WHEN (vehicles.location_lat >= 40.64181327532475 AND vehicles.location_long <  -73.98185534280718) THEN 315.0 END AS bearing FROM "vehicles" WHERE (vehicles.location_lat BETWEEN 40.56944738376933 AND 40.71417916688017 AND vehicles.location_long BETWEEN -74.07722468324057 AND -73.88648600237379) ORDER BY distance ASC LIMIT ?[0m  [["LIMIT", 20]]
Completed 201 Created in 39ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 2535)
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" ORDER BY "battery_shifts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.4ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.160694"], ["updated_at", "2019-11-04 10:28:43.160694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::BatteryShiftsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Load (0.2ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 645)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.168469"], ["updated_at", "2019-11-04 10:28:43.168469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.3ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.170693"], ["updated_at", "2019-11-04 10:28:43.170693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehicleAssignmentsController#create as HTML
  Parameters: {"vehicle_id"=>"1", "battery_shift_id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:28:43.177215"], ["updated_at", "2019-11-04 10:28:43.177215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Completed 201 Created in 3ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 964)
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.5ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.185224"], ["updated_at", "2019-11-04 10:28:43.185224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.188251"], ["updated_at", "2019-11-04 10:28:43.188251"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.4ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["created_at", "2019-11-04 10:28:43.192003"], ["updated_at", "2019-11-04 10:28:43.192003"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#index as HTML
  Parameters: {"battery_shift_id"=>"1"}
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" INNER JOIN "vehicle_assignments" ON "vehicles"."id" = "vehicle_assignments"."vehicle_id" WHERE "vehicle_assignments"."battery_shift_id" = ?[0m  [["battery_shift_id", 1]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms | Allocations: 720)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mBatteryShift Create (0.6ms)[0m  [1m[32mINSERT INTO "battery_shifts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.202101"], ["updated_at", "2019-11-04 10:28:43.202101"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2019-11-04 10:28:43.204351"], ["updated_at", "2019-11-04 10:28:43.204351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBatteryShift Load (0.1ms)[0m  [1m[34mSELECT "battery_shifts".* FROM "battery_shifts" WHERE "battery_shifts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVehicleAssignment Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicle_assignments" ("battery_shift_id", "vehicle_id", "completed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["battery_shift_id", 1], ["vehicle_id", 1], ["completed_at", "2019-11-04 10:28:43.205763"], ["created_at", "2019-11-04 10:28:43.208037"], ["updated_at", "2019-11-04 10:28:43.208037"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_2[0m
Processing by Api::VehiclesController#show as HTML
  Parameters: {"battery_shift_id"=>"1", "id"=>"1"}
  [1m[36mVehicleAssignment Load (0.1ms)[0m  [1m[34mSELECT "vehicle_assignments".* FROM "vehicle_assignments" WHERE "vehicle_assignments"."vehicle_id" = ? AND "vehicle_assignments"."battery_shift_id" = ? ORDER BY "vehicle_assignments"."id" ASC LIMIT ?[0m  [["vehicle_id", 1], ["battery_shift_id", 1], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 337)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
